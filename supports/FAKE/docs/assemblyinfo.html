<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!-- 
      The Generating AssemblyInfo files
 parameters will be replaced with the 
      document title extracted from the <h1> element or
      file name, if there is no <h1> heading
    -->
    <title>Generating AssemblyInfo files
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="FAKE - F# Make">
    <meta name="author" content="Steffen Forkmann, Mauricio Scheffer, Colin Bull">
    <script src="http://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="http://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="content/style.css" />
    <script src="content/tips.js" type="text/javascript"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://github.com/fsharp/fake">github page</a></li>
        </ul>
        <h3 class="muted">FAKE - F# Make</h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          <h1>Generating AssemblyInfo files</h1>

<p>In this article the AssemblyInfo task is used in order to set specific version information to .NET assemblies.</p>

<p>If you succeeded with the <a href="gettingstarted.html">Getting Started tutorial</a>, then you just have to modify your <em>BuildApp</em> target to the following:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">open</span> <span class="i">Fake</span><span class="o">.</span><span class="i">AssemblyInfoFile</span>

<span class="i">Target</span> <span class="s">&quot;</span><span class="s">BuildApp</span><span class="s">&quot;</span> (<span class="k">fun</span> _ <span class="k">-&gt;</span>
    <span class="i">CreateCSharpAssemblyInfo</span> <span class="s">&quot;</span><span class="s">.</span><span class="s">/</span><span class="s">src</span><span class="s">/</span><span class="s">app</span><span class="s">/</span><span class="s">Calculator</span><span class="s">/</span><span class="s">Properties</span><span class="s">/</span><span class="s">AssemblyInfo</span><span class="s">.</span><span class="s">cs</span><span class="s">&quot;</span>
        [<span class="i">Attribute</span><span class="o">.</span><span class="i">Title</span> <span class="s">&quot;</span><span class="s">Calculator</span><span class="s"> </span><span class="s">Command</span><span class="s"> </span><span class="s">line</span><span class="s"> </span><span class="s">tool</span><span class="s">&quot;</span>
         <span class="i">Attribute</span><span class="o">.</span><span class="i">Description</span> <span class="s">&quot;</span><span class="s">Sample</span><span class="s"> </span><span class="s">project</span><span class="s"> </span><span class="s">for</span><span class="s"> </span><span class="s">FAKE</span><span class="s"> </span><span class="s">-</span><span class="s"> </span><span class="s">F</span><span class="s">#</span><span class="s"> </span><span class="s">MAKE</span><span class="s">&quot;</span>
         <span class="i">Attribute</span><span class="o">.</span><span class="i">Guid</span> <span class="s">&quot;</span><span class="s">A539B42C</span><span class="s">-</span><span class="s">CB9F</span><span class="s">-</span><span class="s">4</span><span class="s">a23</span><span class="s">-</span><span class="s">8</span><span class="s">E57</span><span class="s">-</span><span class="s">AF4E7CEE5BAA</span><span class="s">&quot;</span>
         <span class="i">Attribute</span><span class="o">.</span><span class="i">Product</span> <span class="s">&quot;</span><span class="s">Calculator</span><span class="s">&quot;</span>
         <span class="i">Attribute</span><span class="o">.</span><span class="i">Version</span> <span class="i">version</span>
         <span class="i">Attribute</span><span class="o">.</span><span class="i">FileVersion</span> <span class="i">version</span>]

    <span class="i">CreateCSharpAssemblyInfo</span> <span class="s">&quot;</span><span class="s">.</span><span class="s">/</span><span class="s">src</span><span class="s">/</span><span class="s">app</span><span class="s">/</span><span class="s">CalculatorLib</span><span class="s">/</span><span class="s">Properties</span><span class="s">/</span><span class="s">AssemblyInfo</span><span class="s">.</span><span class="s">cs</span><span class="s">&quot;</span>
        [<span class="i">Attribute</span><span class="o">.</span><span class="i">Title</span> <span class="s">&quot;</span><span class="s">Calculator</span><span class="s"> </span><span class="s">library</span><span class="s">&quot;</span>
         <span class="i">Attribute</span><span class="o">.</span><span class="i">Description</span> <span class="s">&quot;</span><span class="s">Sample</span><span class="s"> </span><span class="s">project</span><span class="s"> </span><span class="s">for</span><span class="s"> </span><span class="s">FAKE</span><span class="s"> </span><span class="s">-</span><span class="s"> </span><span class="s">F</span><span class="s">#</span><span class="s"> </span><span class="s">MAKE</span><span class="s">&quot;</span>
         <span class="i">Attribute</span><span class="o">.</span><span class="i">Guid</span> <span class="s">&quot;</span><span class="s">EE5621DB</span><span class="s">-</span><span class="s">B86B</span><span class="s">-</span><span class="s">44</span><span class="s">eb</span><span class="s">-</span><span class="s">987</span><span class="s">F</span><span class="s">-</span><span class="s">9</span><span class="s">C94BCC98441</span><span class="s">&quot;</span>
         <span class="i">Attribute</span><span class="o">.</span><span class="i">Product</span> <span class="s">&quot;</span><span class="s">Calculator</span><span class="s">&quot;</span>
         <span class="i">Attribute</span><span class="o">.</span><span class="i">Version</span> <span class="i">version</span>
         <span class="i">Attribute</span><span class="o">.</span><span class="i">FileVersion</span> <span class="i">version</span>]

    <span class="i">MSBuildRelease</span> <span class="i">buildDir</span> <span class="s">&quot;</span><span class="s">Build</span><span class="s">&quot;</span> <span class="i">appReferences</span>
      <span class="o">|&gt;</span> <span class="i">Log</span> <span class="s">&quot;</span><span class="s">AppBuild</span><span class="s">-</span><span class="s">Output</span><span class="s">:</span><span class="s"> </span><span class="s">&quot;</span>
)</pre>
</td>
</tr>
</table>

<p>As you can see generating an AssemblyInfo.cs file is pretty easy with FAKE. You can read more about the C# and F# AssemblyInfo tasks in the <a href="apidocs/fake-assemblyinfofile.html">API docs</a>.</p>

<h2>Setting the version no.</h2>

<p>The version parameter can be declared as a property or fetched from a build server like TeamCity:</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="i">version</span> <span class="o">=</span>
  <span class="k">match</span> <span class="i">buildServer</span> <span class="k">with</span>
  | <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="i">TeamCity</span> <span class="k">-&gt;</span> <span class="i">buildVersion</span>
  | _ <span class="k">-&gt;</span> <span class="s">&quot;</span><span class="s">0</span><span class="s">.</span><span class="s">2</span><span class="s">&quot;</span></pre>
</td>
</tr>
</table>

<p><img src="pics/assemblyinfo/result.png" alt="alt text" title="The file version is set by FAKE" /></p>

<h2>Using the SolutionInfo approach</h2>

<p>Some companies split their AssemblyInfo into a SolutionInfo.cs which is shared by all projects and a specific AssemblyInfo per project which contains the product data. 
All versioning data is generated by the AssemblyInfo task into the SolutionInfo.cs and the AssemblyInfo files are editied manually. This could look like this:</p>

<p><img src="pics/assemblyinfo/solutioninfo.png" alt="alt text" title="SolutionInfo.cs is shared between projects" /></p>

<p>The generated SolutionInfo.cs looks like this:</p>

<p><img src="pics/assemblyinfo/generated.png" alt="alt text" title="Generated SolutionInfo.cs" /></p>

          <div class="tip" id="fs1">val version : string<br /><br />Full name: assemblyinfo.version</div>
<div class="tip" id="fs2">val TeamCity : obj</div>
          
        </div>
        <div class="span3">

          <ul class="nav nav-list" id="menu">
            <li class="nav-header">FAKE - F# Make</li>
              <li><a href="index.html">Home page</a></li>
              <li class="divider"></li>              
            <li><a href="https://nuget.org/packages/Fake">Get FAKE via NuGet</a></li>
              <li><a href="http://github.com/fsharp/fake">Source Code on GitHub</a></li>              
              <li><a href="https://github.com/fsharp/FAKE/blob/develop/License.txt">License (MS-PL)</a></li>
              <li><a href="changelog.html">Changelog</a></li>
              <li><a href="contributing.html">Contributing to FAKE</a></li>
              <li><a href="http://stackoverflow.com/questions/tagged/f%23-fake">Ask a question</a></li>
            <li class="nav-header">Articles</li>
              <li><a href="gettingstarted.html">Getting started</a></li>
              <li class="divider"></li>
              <li><a href="nuget.html">NuGet package restore</a></li>
              <li><a href="fxcop.html">Using FxCop in a build</a></li>
              <li><a href="assemblyinfo.html">Generating AssemblyInfo</a></li>
              <li><a href="create-nuget-package.html">Create NuGet packages</a></li>
              <li><a href="specifictargets.html">Running specific targets</a></li>
              <li><a href="commandline.html">Running FAKE from command line</a></li>
              <li><a href="customtasks.html">Creating custom tasks</a></li>
              <li><a href="teamcity.html">TeamCity integration</a></li>
              <li><a href="octopusdeploy.html">Octopus Deploy</a></li>
              <li class="divider"></li>
              <li><a href="deploy.html">Fake.Deploy</a></li>
              <li class="nav-header">Documentation</li>
              <li><a href="apidocs/index.html">API Reference</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/fsharp/fake"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
  </body>
</html>